<link rel="stylesheet" href="../css/help.css">

<div class="helpContent">

<div><a href="index.html">&lt; Help Index</a></div>

<h1>Motor</h1>
<p>Base class: <i>Drone</i></p>
<p>Manages a Motor via an H Bridge module using PWM</p>


<h2>Example Configuration</h2>
<pre>Motor.new 11
  name "LeftMotor"
  interval 50
  pins OUT0_0 OUT0_1 DAC0_0
  PWMChannel 15
  limits -0.7 0.7
  deadband 0.3
  $speed [@>10.8]

  // publish
  .publish "speed"
.done</pre>

<h2>Subs (inputs)</h2>
<table>
  <tr>
    <th>Address</th>
    <th>Addr Address</th>
    <th>Name</th>
    <th>Type</th>
    <th>#</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>8</td>
    <td>9</td>
    <td>speed</td>
    <td>f</td>
    <td>1</td>
    <td>Desired Motor speed in range -1 to 1</td>
  </tr>
</table>

<h2>Pubs (outputs / config)</h2>
<table>
  <tr>
    <th>Address</th>
    <th>Name</th>
    <th>Type</th>
    <th>#</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>10</td>
    <td>pins</td>
    <td>u8</td>
    <td>3</td>
    <td>Pin connections - dependent on mode (e.g. A, B, EN for standard H-bridge)</td>
  </tr>
  <tr>
    <td>11</td>
    <td>PWMChannel</td>
    <td>u8</td>
    <td>1</td>
    <td>Which ESP32 PWM channel to use (default 15), mode 1 requires two channels and will use +1 as well</td>
  </tr>
  <tr>
    <td>12</td>
    <td>limits</td>
    <td>f</td>
    <td>2</td>
    <td>Min and max speed limits in range -1 to 1 (default -1 1)</td>
  </tr>
  <tr>
    <td>13</td>
    <td>deadband</td>
    <td>f</td>
    <td>1</td>
    <td>Input range within which to set the motor output to zero, interpreted abs(input).  Default 0.3</td>
  </tr>
  <tr>
    <td>14</td>
    <td>mode</td>
    <td>u8</td>
    <td>1</td>
    <td>Operational mode. 0: standard H-bridge with A, B, and PWM-EN. 1: BTS7960 with PWM F & R.  2: Cytron with PWM speed + Dir</td>
  </tr>
  <tr>
    <td>15</td>
    <td>invert</td>
    <td>u8</td>
    <td>1</td>
    <td>Invert output direction (0=normal, 1=inverted)</td>
  </tr>
</table>

</div>
